webpackJsonp([12],{"4yfn":function(t,e,a){t.exports=a.p+"static/img/studyMapBg@2x.a2c693e.png"},dCRI:function(t,e,a){t.exports=a.p+"static/img/noStudyMap@2x.e2724ba.png"},rPWU:function(t,e){},tYsD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mtWM"),i=a.n(s),o={name:"",data:function(){return{publicCourse:[],publicSituation:[],studyRatio:[],alreadyStudy:0,totalMicNum:0,allStudyRatio:0,API_ROOT:"http://gjzxedu.gtafe.com/"}},created:function(){var t=this,e=localStorage.getItem("userID"),a=new URLSearchParams;a.append("buyerUserId",e),a.append("institutionId",10103),i.a.post("http://gjzxedu.gtafe.com//teach/rest/v1/course/getstudyMap",a).then(function(e){if(0===e.data.code){var a=e.data.data.getstudyMap;t.alreadyStudy=e.data.data.learnedMicnum,t.totalMicNum=e.data.data.totalMicNum,t.allStudyRatio=0==t.totalMicNum?0:parseInt(t.alreadyStudy/t.totalMicNum*100),t.publicCourse=a;for(var s=0;s<a.length;s++)t.studyRatio.push(parseInt(a[s].learnedMic/a[s].totalMic*100))}})},methods:{goCourseVideo:function(t){this.$router.push({name:"CourseDetail",query:{courseId:t}})},paintProess:function(t,e){var a=document.getElementsByClassName("courseList")[0].getElementsByTagName("canvas");if(a.length>0){a[0].height;for(var s=.028*a[0].height,i=.083*a[0].height,o=a[0].width,n=a[0].height/2,r=0;r<a.length;r++){var l=a[r].getContext("2d");l.save(),l.fillStyle="#999999",l.lineWidth=s,l.beginPath(),l.fillRect(0,n,o,12),l.stroke(),l.closePath(),l.restore(),l.save(),l.fillStyle="#3246D8",l.lineWidth=i,l.beginPath(),l.fillRect(0,n,e[r]*(o/100),12),l.stroke(),l.closePath(),l.restore()}}}},mounted:function(){var t=this;setTimeout(function(){t.paintProess(0,t.studyRatio);var e=document.getElementsByClassName("studymap_overview")[0].getElementsByTagName("canvas");if(e.length>0){var a=e[0].width,s=.65*e[0].height,i=e[0].getContext("2d");i.save(),i.fillStyle="#ffffff",i.beginPath(),i.fillRect(0,0,a,s),i.stroke(),i.closePath(),i.restore(),i.save(),i.fillStyle="#3246D8",i.beginPath(),i.fillRect(0,0,t.allStudyRatio*(a/100),s),i.stroke(),i.closePath(),i.restore()}},600)}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"studymap"},[t._m(0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.publicCourse.length,expression:"publicCourse.length !== 0"}],staticClass:"studymap_overview"},[s("img",{attrs:{src:a("4yfn")}}),t._v(" "),s("span",{staticClass:"maptip"},[t._v("学习成长地图")]),t._v(" "),s("p",{staticClass:"ratio"},[s("span",[t._v(t._s(t.allStudyRatio))]),t._v("%")]),t._v(" "),s("span",{staticClass:"micro_complete"},[t._v(t._s(t.alreadyStudy)+"门课/"+t._s(t.totalMicNum)+"个微课")]),t._v(" "),s("canvas")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.publicCourse.length,expression:"publicCourse.length !== 0"}],staticClass:"courseList"},t._l(t.publicCourse,function(e,a){return s("div",{key:a,staticClass:"courseInfoDetail",on:{click:function(a){return t.goCourseVideo(e.courseId)}}},[s("img",{attrs:{src:t.API_ROOT+e.coverImg}}),t._v(" "),s("span",{staticClass:"courseInfo_coursetitle"},[t._v(t._s(e.courseName))]),t._v(" "),s("span",{staticClass:"courseInfo_courseTotal"},[t._v(t._s(e.totalMic)+"节微课")]),t._v(" "),s("canvas"),t._v(" "),s("span",{staticClass:"courseInfo_studyRatio"},[t._v(t._s(t.studyRatio[a])+"%")])])}),0),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===t.publicCourse.length,expression:"publicCourse.length === 0"}],staticClass:"notFound"},[s("img",{staticClass:"notFound_img",attrs:{src:a("dCRI")}}),t._v(" "),s("span",[t._v("暂无学习课程，快去学习吧～")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("a",{attrs:{href:"#/myinfo"}},[e("img",{attrs:{src:a("oa8A")}})]),e("span",[this._v("学习地图")])])}]};var r=a("VU/8")(o,n,!1,function(t){a("rPWU")},"data-v-2a65d4fd",null);e.default=r.exports}});