webpackJsonp([33],{N2pZ:function(e,s){},cCBF:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("mtWM"),i=t.n(a),r={name:"",inject:["reload"],data:function(){return{swiperOption:{on:{slideChangeTransitionEnd:function(){for(var e=document.getElementById("myMessageClass").getElementsByTagName("li"),s=0;s<e.length;s++)s===this.activeIndex?e[s].setAttribute("class","activeSelect"):e[s].setAttribute("class","")}}},commMessage:[],sysMessage:[],commUnreadMessage:[],sysUnreadMessage:[],API_ROOT:"http://gjzxedu.gtafe.com/"}},mounted:function(){var e=this;i.a.get("http://gjzxedu.gtafe.com//teach/rest/v1/message/getMyselfMessage?messageClassify=0&recipientsUserId="+localStorage.getItem("userID")+"&institutionId=10103").then(function(s){if(0===s.data.code)for(var t=s.data.data,a=0;a<t.length;a++){var i=t[a];i.createTime=e.formatDateTime(i.createTime),e.commMessage.push(i),0===i.replyStatus&&e.commUnreadMessage.push(i)}}),i.a.get("http://gjzxedu.gtafe.com//teach/rest/v1/message/getMyselfMessage?messageClassify=1&recipientsUserId="+localStorage.getItem("userID")+"&institutionId=10103").then(function(s){if(0===s.data.code)for(var t=s.data.data,a=0;a<t.length;a++){var i=t[a];i.createTime=e.formatDateTime(i.createTime),e.sysMessage.push(i),0===i.replyStatus&&e.sysUnreadMessage.push(i)}})},methods:{selectMenu:function(e){var s=document.getElementById("myMessageClass").getElementsByTagName("li");0===e?(s[0].setAttribute("class","activeSelect"),s[1].setAttribute("class",""),this.$refs.myswiper.swiper.slideTo(0,300,!1)):1===e&&(s[1].setAttribute("class","activeSelect"),s[0].setAttribute("class",""),this.$refs.myswiper.swiper.slideTo(1,300,!1))},goNoticeDetail:function(e){this.$router.push({name:"NoticeDetail",query:{messageId:e}})},formatDateTime:function(e){e=(e=(e=e.replace(/-/g,"/")).replace("T"," ")).replace(".000+0000","");var s=new Date(e);s.setHours(s.getHours()+8);var t=s.getFullYear(),a=s.getMonth()+1;a=a<10?"0"+a:a;var i=s.getDate();i=i<10?"0"+i:i;var r=s.getHours();r=r<10?"0"+r:r;var n=s.getMinutes(),c=s.getSeconds();return n=n<10?"0"+n:n,c=c<10?"0"+c:c,t+"-"+a+"-"+i},readMessage:function(){var e=this,s=document.getElementById("myMessageClass").getElementsByTagName("li"),t="",a=[];if("activeSelect"===s[0].getAttribute("class")?a=this.commUnreadMessage:"activeSelect"===s[1].getAttribute("class")&&(a=this.sysUnreadMessage),0!==a.length){for(var r=0;r<a.length;r++){var n=a[r];t=0==r?n.id:t+","+n.id}i.a.get("http://gjzxedu.gtafe.com//teach/rest/v1/message/readAndUnread?id="+t+"&institutionId=10103").then(function(s){0===s.data.code&&e.reload()})}}}},n={render:function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"myorder"},[a("div",{staticClass:"header"},[e._m(0),a("span",{staticClass:"title"},[e._v("我的消息")]),a("span",{staticClass:"read",on:{click:e.readMessage}},[e._v("已读")])]),e._v(" "),a("ul",{staticClass:"myMessageClass",attrs:{id:"myMessageClass"}},[a("li",{staticClass:"activeSelect",on:{click:function(s){return e.selectMenu(0)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.commUnreadMessage.length,expression:"commUnreadMessage.length !== 0"}],staticClass:"red_dot"},[e._v(e._s(e.commUnreadMessage.length))]),e._v("平台消息")]),e._v(" "),a("li",{on:{click:function(s){return e.selectMenu(1)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0!==e.sysUnreadMessage.length,expression:"sysUnreadMessage.length !== 0"}],staticClass:"red_dot"},[e._v(e._s(e.sysUnreadMessage.length))]),e._v("系统消息")])]),e._v(" "),a("swiper",{ref:"myswiper",attrs:{options:e.swiperOption}},[a("swiper-slide",[e._l(e.commMessage,function(s,i){return a("div",{key:i,staticClass:"messageList",on:{click:function(t){return e.goNoticeDetail(s.id)}}},[a("p",[a("span",{directives:[{name:"show",rawName:"v-show",value:0===s.replyStatus,expression:"message.replyStatus === 0"}],staticClass:"red_dot"}),e._v(" "),a("span",{staticClass:"title"},[e._v(e._s(s.messageTitle))]),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(s.createTime))]),e._v(" "),a("img",{staticClass:"right_arrow",attrs:{src:t("hg0P")}})]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(s.messageContent))])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.commMessage.length,expression:"commMessage.length === 0"}],staticClass:"notOrder"},[a("img",{staticClass:"notOrder_img",attrs:{src:t("kcR/")}}),e._v(" "),a("span",{staticClass:"notOrder_tip"},[e._v("暂无消息")])])],2),e._v(" "),a("swiper-slide",[e._l(e.sysMessage,function(s,t){return a("div",{key:t,staticClass:"messageList",on:{click:function(t){return e.goNoticeDetail(s.id)}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===s.replyStatus,expression:"message.replyStatus === 0"}],staticClass:"red_dot"}),e._v(" "),a("span",[e._v(e._s(s.messageTitle))]),e._v(" "),a("span",[e._v(e._s(s.messageContent))]),e._v(" "),a("span",{staticClass:"time"},[e._v(e._s(s.createTime))])])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.sysMessage.length,expression:"sysMessage.length === 0"}],staticClass:"notOrder"},[a("img",{staticClass:"notOrder_img",attrs:{src:t("kcR/")}}),e._v(" "),a("span",{staticClass:"notOrder_tip"},[e._v("暂无消息")])])],2)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("a",{attrs:{href:"#/myinfo"}},[s("img",{attrs:{src:t("n3nf")}})])}]};var c=t("VU/8")(r,n,!1,function(e){t("N2pZ")},"data-v-4040f883",null);s.default=c.exports}});