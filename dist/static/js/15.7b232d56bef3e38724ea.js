webpackJsonp([15],{bk5S:function(e,s){},dIqY:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("mvHQ"),i=t.n(r),n=t("mtWM"),o=t.n(n),a={name:"",data:function(){return{phoneImgFlag:!0,confirmImgFlag:!0,psdImgFlag:!0,psdImgFlag0:!1,psd2ImgFlag:!0,psd2ImgFlag0:!1,phoneImgFlag0:!1,confirmImgFlag0:!1,psd:"",psd2:"",phoneNumber:"",confirmNumber:"",newPhone:!1,timer:0,time:60,TipsMsg:["手机号码已经注册","密码为6位且不超过20位的数字或字母或下划线组成","验证码错误","前后两次密码不一致","请输入正确的手机格式"],errorTipsMsg:""}},beforeDestroy:function(){clearInterval(this.timer)},watch:{phoneNumber:function(){this.checkNumber()}},methods:{back:function(){this.$router.replace("/mine")},checkNumber:function(){/^\d+/.test(this.phoneNumber)?this.phoneNumber=this.phoneNumber.replace(/\D/g,""):this.phoneNumber=""},changeFlag0:function(e){"phone"===e?this.phoneImgFlag0=!0:"psd"===e?this.psdImgFlag0=!0:"psd2"===e?this.psd2ImgFlag0=!0:this.confirmImgFlag0=!0},checkPsd2:function(){this.psd2&&this.errorTipsMsg!==this.TipsMsg[2]?this.psd2ImgFlag=!1:this.psd2ImgFlag=!0},checkCommonPsd:function(){/^[\w]{6,20}$/.test(this.psd2)&&this.psd2===this.psd?this.errorTipsMsg="":this.errorTipsMsg=this.TipsMsg[3]},checkNewphone:function(){var e=this;if(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber)){var s=new URLSearchParams,t=this.phoneNumber.toString();s.append("mobile",t),o.a.post("http://gjzxedu.gtafe.com//cms/isNoMobile",s).then(function(s){s.data.mess?(e.newPhone=!1,e.errorTipsMsg=e.TipsMsg[0]):(e.newPhone=!0,e.errorTipsMsg="")}).catch(function(e){alert("判断手机号是否已经注册失败"+e)})}},checkPhone:function(){/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber)?this.newPhone?this.phoneImgFlag=!1:this.phoneImgFlag=!0:(this.phoneImgFlag=!0,this.errorTipsMsg=this.TipsMsg[4])},checkConfirm:function(){this.confirmNumber.trim()?this.confirmImgFlag=!1:this.confirmImgFlag=!0},checkPsd:function(){this.psd&&this.errorTipsMsg!==this.TipsMsg[1]?this.psdImgFlag=!1:this.psdImgFlag=!0},checkEffectivePsd:function(){/^[\w]{6,20}$/.test(this.psd)?this.errorTipsMsg="":this.errorTipsMsg=this.TipsMsg[1]},getConfirm:function(){var e=this;if(!this.phoneImgFlag&&this.newPhone){if(60!==this.time)return;this.timer=setInterval(function(){e.$refs.getConfirm.innerHTML=e.time+"s",e.time--,-1===e.time&&(clearInterval(e.timer),e.time=60,e.$refs.getConfirm.innerHTML="获取验证码")},1e3);var s=new URLSearchParams,t=this.phoneNumber.toString();s.append("mobile",t),o.a.post("http://gjzxedu.gtafe.com//cms/sendAliMsg",s).then(function(e){var s=e.data.code;console.log(s)}).catch(function(e){alert("短信验证发送错误"+e)})}},goRegister:function(){var e=this;if(this.errorTipsMsg&&this.errorTipsMsg!==this.TipsMsg[2]||this.phoneImgFlag||this.psdImgFlag||this.psd2ImgFlag||!this.newPhone||this.confirmImgFlag)!this.errorTipsMsg&&this.phoneImgFlag?this.errorTipsMsg="请输入手机号":!this.errorTipsMsg&&this.confirmImgFlag?this.errorTipsMsg="请输入验证码":!this.errorTipsMsg&&this.psdImgFlag?this.errorTipsMsg="请输入密码":!this.errorTipsMsg&&this.psd2ImgFlag&&(this.errorTipsMsg="请输入确认密码");else{var s={mobile:this.phoneNumber,userPassword:this.psd,code:this.confirmNumber,equipmentType:3,institutionId:10103},t=new URLSearchParams;t.append("params",i()(s)),o.a.post("http://gjzxedu.gtafe.com//cms/registUser",t).then(function(s){0===s.data.code?o.a.post("http://gjzxedu.gtafe.com//cms/rest/v1/login/login",t).then(function(s){var t=s.data.data.id;e.$router.replace("/home"),localStorage.setItem("userID",t),e.errorTipsMsg=""}):(e.errorTipsMsg=e.TipsMsg[2],e.confirmImgFlag=!0)}).catch(function(e){alert("注册用户失败"+e)})}}}},p={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"register clearMargin_top"},[r("a",{staticClass:"backArrow",attrs:{href:"javascript:;"},on:{click:e.back}},[r("img",{attrs:{src:t("H5bj")}})]),e._v(" "),r("p",{staticClass:"register_banner"},[e._v("注册")]),e._v(" "),r("div",{staticClass:"inputPhone"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{focus:function(s){return e.changeFlag0("phone")},blur:e.checkPhone,keyup:e.checkNewphone,input:function(s){s.target.composing||(e.phoneNumber=s.target.value)}}}),r("span",[e._v("+86")]),e.phoneImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.phoneImgFlag0,expression:"phoneImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),e._v(" "),r("div",{staticClass:"inputConfirm"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmNumber,expression:"confirmNumber"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.confirmNumber},on:{focus:function(s){return e.changeFlag0("confirm")},blur:e.checkConfirm,input:function(s){s.target.composing||(e.confirmNumber=s.target.value)}}}),r("span",{ref:"getConfirm",on:{click:e.getConfirm}},[e._v("获取验证码")]),e.confirmImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.confirmImgFlag0,expression:"confirmImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),e._v(" "),r("div",{staticClass:"inputPsd"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.psd,expression:"psd"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.psd},on:{focus:function(s){return e.changeFlag0("psd")},blur:e.checkPsd,keyup:e.checkEffectivePsd,input:function(s){s.target.composing||(e.psd=s.target.value)}}}),e.psdImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.psdImgFlag0,expression:"psdImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),e._v(" "),r("div",{staticClass:"inputNewPsd2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.psd2,expression:"psd2"}],attrs:{type:"password",placeholder:"请再次确认新密码"},domProps:{value:e.psd2},on:{focus:function(s){return e.changeFlag0("psd2")},keyup:e.checkCommonPsd,blur:e.checkPsd2,input:function(s){s.target.composing||(e.psd2=s.target.value)}}}),e.psd2ImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.psd2ImgFlag0,expression:"psd2ImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),e._v(" "),r("div",{staticClass:"btn"},[r("button",{on:{click:e.goRegister}},[e._v("立即注册")]),r("span",{domProps:{textContent:e._s(e.errorTipsMsg)}})])])},staticRenderFns:[]};var g=t("VU/8")(a,p,!1,function(e){t("bk5S")},"data-v-1bafd96c",null);s.default=g.exports},mvHQ:function(e,s,t){e.exports={default:t("qkKv"),__esModule:!0}},qkKv:function(e,s,t){var r=t("FeBl"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}});