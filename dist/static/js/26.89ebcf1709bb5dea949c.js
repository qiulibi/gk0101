webpackJsonp([26],{"6gYu":function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("mtWM"),i=t.n(r),o={name:"",data:function(){return{phoneNumber:"",timer:0,time:60,psd:"",psd2:"",confirmNumber:"",oldPhone:!1,psdImgFlag:!0,psd2ImgFlag:!0,psd2ImgFlag0:!1,psdImgFlag0:!1,confirmImgFlag:!0,confirmImgFlag0:!1,phoneImgFlag:!0,phoneImgFlag0:!1,TipsMsg:["手机号还未注册","密码为6位且不超过20位的数字或字母或下划线组成","前后两次密码不一致","验证码错误","请输入正确的手机格式"],errorTipsMsg:""}},watch:{phoneNumber:function(){this.checkNumber()}},beforeDestroy:function(){clearInterval(this.timer)},methods:{backToMine:function(){this.$router.go(-1)},getConfirm:function(){var s=this;if(!this.phoneImgFlag&&this.oldPhone){if(60!==this.time)return;this.timer=setInterval(function(){s.$refs.getConfirm.innerHTML=s.time+"s",s.time--,-1===s.time&&(clearInterval(s.timer),s.time=60,s.$refs.getConfirm.innerHTML="获取验证码")},1e3);var e=new URLSearchParams,t=this.phoneNumber.toString();e.append("mobile",t),i.a.post("http://gjzxedu.gtafe.com//cms/sendAliMsg",e).then(function(s){var e=s.data.code;console.log(e)})}},checkConfirm:function(){this.confirmNumber.trim()?this.confirmImgFlag=!1:this.confirmImgFlag=!0},checkEmplyConfirm:function(){this.confirmNumber.trim()?this.errorTipsMsg="":this.errorTipsMsg="请输入验证码"},checkPsd:function(){this.psd&&this.errorTipsMsg!==this.TipsMsg[1]?this.psdImgFlag=!1:this.psdImgFlag=!0},checkPsd2:function(){this.psd2&&this.errorTipsMsg!==this.TipsMsg[2]?this.psd2ImgFlag=!1:this.psd2ImgFlag=!0},checkCommonPsd:function(){/^[\w]{6,20}$/.test(this.psd2)&&this.psd2===this.psd?this.errorTipsMsg="":this.errorTipsMsg=this.TipsMsg[2]},checkEffectivePsd:function(){/^[\w]{6,20}$/.test(this.psd)?this.psd!==this.psd2&&/^[\w]{6,20}$/.test(this.psd)?this.errorTipsMsg=this.TipsMsg[2]:this.errorTipsMsg="":this.errorTipsMsg=this.TipsMsg[1]},checkNumber:function(){/^\d+/.test(this.phoneNumber)?this.phoneNumber=this.phoneNumber.replace(/\D/g,""):this.phoneNumber=""},checkOldphone:function(){var s=this;if(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber)){var e=new URLSearchParams,t=this.phoneNumber.toString();e.append("mobile",t),i.a.post("http://gjzxedu.gtafe.com//cms/isNoMobile",e).then(function(e){e.data.mess?(s.oldPhone=!0,s.errorTipsMsg=""):(s.errorTipsMsg=s.TipsMsg[0],s.oldPhone=!1)})}},changeFlag0:function(s){"phone"===s?this.phoneImgFlag0=!0:"psd"===s?this.psdImgFlag0=!0:"psd2"===s?this.psd2ImgFlag0=!0:this.confirmImgFlag0=!0},checkPhone:function(){/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber)?this.oldPhone?this.phoneImgFlag=!1:this.phoneImgFlag=!0:(this.phoneImgFlag=!0,this.errorTipsMsg=this.TipsMsg[4])},forgetPsd:function(){var s=this;if(this.errorTipsMsg&&this.errorTipsMsg!==this.TipsMsg[3]||this.phoneImgFlag||this.psd2ImgFlag||this.psdImgFlag||!this.oldPhone||this.confirmImgFlag)!this.errorTipsMsg&&this.phoneImgFlag?this.errorTipsMsg="请输入手机号":!this.errorTipsMsg&&this.confirmImgFlag?this.errorTipsMsg="请输入验证码":!this.errorTipsMsg&&this.psdImgFlag?this.errorTipsMsg="请输入密码":!this.errorTipsMsg&&this.psd2ImgFlag&&(this.errorTipsMsg="请输入确认密码");else{var e=new URLSearchParams;e.append("mobile",this.phoneNumber),e.append("code",this.confirmNumber),e.append("userPassword",this.psd),i.a.post("http://gjzxedu.gtafe.com//cms/setNewPassword",e).then(function(e){0===e.data.code?(s.$router.replace("/mine"),s.errorTipsMsg=""):(s.errorTipsMsg=s.TipsMsg[3],s.confirmImgFlag=!0)})}}}},n={render:function(){var s=this,e=s.$createElement,r=s._self._c||e;return r("div",{staticClass:"forgetpsd clearMargin_top"},[r("a",{staticClass:"backArrow",attrs:{href:"javascript:;"}},[r("img",{attrs:{src:t("H5bj")},on:{click:s.backToMine}})]),s._v(" "),r("span",{staticClass:"title"},[s._v("忘记密码")]),s._v(" "),r("div",{staticClass:"inputPhone"},[r("span",[s._v("+86")]),s._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:s.phoneNumber,expression:"phoneNumber"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:s.phoneNumber},on:{keyup:s.checkOldphone,focus:function(e){return s.changeFlag0("phone")},blur:s.checkPhone,input:function(e){e.target.composing||(s.phoneNumber=e.target.value)}}}),s._v(" "),s.phoneImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:s.phoneImgFlag0,expression:"phoneImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),s._v(" "),r("div",{staticClass:"inputConfirm"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.confirmNumber,expression:"confirmNumber"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:s.confirmNumber},on:{keyup:s.checkEmplyConfirm,focus:function(e){return s.changeFlag0("confirm")},blur:s.checkConfirm,input:function(e){e.target.composing||(s.confirmNumber=e.target.value)}}}),s._v(" "),r("span",{ref:"getConfirm",on:{click:s.getConfirm}},[s._v("获取验证码")]),s._v(" "),s.confirmImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:s.confirmImgFlag0,expression:"confirmImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),s._v(" "),r("div",{staticClass:"inputNewPsd"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.psd,expression:"psd"}],attrs:{type:"password",placeholder:"请输入新密码"},domProps:{value:s.psd},on:{focus:function(e){return s.changeFlag0("psd")},blur:s.checkPsd,keyup:s.checkEffectivePsd,input:function(e){e.target.composing||(s.psd=e.target.value)}}}),s._v(" "),s.psdImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:s.psdImgFlag0,expression:"psdImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),s._v(" "),r("div",{staticClass:"inputNewPsd2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.psd2,expression:"psd2"}],attrs:{type:"password",placeholder:"请再次确认新密码"},domProps:{value:s.psd2},on:{focus:function(e){return s.changeFlag0("psd2")},keyup:s.checkCommonPsd,blur:s.checkPsd2,input:function(e){e.target.composing||(s.psd2=e.target.value)}}}),s.psd2ImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:s.psd2ImgFlag0,expression:"psd2ImgFlag0"}],attrs:{src:t("7rtp")}}):r("img",{attrs:{src:t("5hax")}})]),s._v(" "),r("button",{staticClass:"forgetPsd_btn",on:{click:s.forgetPsd}},[s._v("确定")]),s._v(" "),r("span",{staticClass:"errorTipsMsg",domProps:{textContent:s._s(s.errorTipsMsg)}})])},staticRenderFns:[]};var a=t("VU/8")(o,n,!1,function(s){t("XSZM")},"data-v-71ed5867",null);e.default=a.exports},XSZM:function(s,e){}});