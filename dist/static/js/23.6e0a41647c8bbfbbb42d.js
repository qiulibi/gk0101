webpackJsonp([23],{JyEb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mtWM"),n=a.n(s),i={name:"",data:function(){return{personinfo:{userImg:"./static/img/bat_me@2x.png",sex:"",institutionName:"",userAccount:""},male:!1,female:!1,name:"",phone:"",email:"",qq:"",WeChat:"",file:null,sex:""}},created:function(){var e=this,t="http://www.gjzxedu.com/cms/getUserInfoByUserIdOnPone?userId="+localStorage.getItem("userID");n.a.get(t).then(function(t){var a=t.data.data;a.userImg&&(e.personinfo.userImg="http://www.gjzxedu.com"+a.userImg),"null"!==a.weChat&&(e.WeChat=a.weChat),"null"!==a.qq&&(e.qq=a.qq),"null"!==a.email&&(e.email=a.email),e.personinfo.sex=a.sex,1===e.personinfo.sex?(e.male=!0,e.female=!1):2===e.personinfo.sex&&(e.female=!0,e.male=!1),e.personinfo.institutionName=a.institutionName,e.personinfo.userAccount=a.userAccount,e.phone=a.mobile,e.name=a.userName}).catch(function(e){alert("请求个人信息数据错误"+e)})},methods:{showImg:function(e){if(0!==e.target.files.length){var t=e.target.files[0];this.file=t;var a=window.URL.createObjectURL(t);this.personinfo.userImg=a,e.target.value=null}},save:function(){var e=this;if(""===this.phone.trim()||/^1[34578]\d{9}$/.test(this.phone.trim())){this.$refs.radioMale.checked?this.sex=1:this.$refs.radioFemale.checked&&(this.sex=2);var t=new FormData;t.append("file",this.file),t.append("id",localStorage.getItem("userID")),t.append("userName",this.name),t.append("sex",this.sex),t.append("mobile",this.phone),t.append("email",this.email),t.append("qq",this.qq),t.append("weChat",this.WeChat),n.a.post("http://www.gjzxedu.com/cms/updateUser",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){0===t.data.code&&e.$router.go(-1)}).catch(function(e){alert("更新用户数据失败"+e)})}else alert("手机号格式错误")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personinfo"},[a("div",{staticClass:"personinfo_title"},[e._m(0),e._v(" "),a("span",{staticClass:"person_info_title"},[e._v("个人信息")]),e._v(" "),a("span",{staticClass:"save",on:{click:e.save}},[e._v("保存")])]),e._v(" "),a("div",{staticClass:"person_img"},[a("span",{staticClass:"commonSpan"},[e._v("头像")]),e._v(" "),a("a",{attrs:{href:"javascript:;"}},[a("input",{attrs:{type:"file",id:"file01",name:"file01",accept:"image/*"},on:{change:e.showImg}}),a("img",{attrs:{src:e.personinfo.userImg}})])]),e._v(" "),a("div",{staticClass:"name commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("姓名")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入您的姓名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"sex commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("性别")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("label",{attrs:{for:"male"}},[e._v("男")]),a("input",{ref:"radioMale",staticClass:"sex_input",attrs:{type:"radio",id:"male",name:"sex"},domProps:{checked:e.male}}),a("label",{attrs:{for:"female"}},[e._v("女")]),a("input",{ref:"radioFemale",staticClass:"sex_input",attrs:{type:"radio",id:"female",name:"sex"},domProps:{checked:e.female}})])]),e._v(" "),a("div",{staticClass:"account commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("账号")]),a("span",{staticClass:"commonHeight_SpanRight"},[e._v(e._s(e.personinfo.userAccount))])]),e._v(" "),a("div",{staticClass:"company commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("所属企业")]),a("span",{staticClass:"commonHeight_SpanRight"},[e._v(e._s(e.personinfo.institutionName))])]),e._v(" "),a("div",{staticClass:"contact commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("联系方式")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"email commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("邮箱")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"请输入邮箱"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"qq commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("QQ号")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.qq,expression:"qq"}],attrs:{type:"text",placeholder:"请输入QQ号"},domProps:{value:e.qq},on:{input:function(t){t.target.composing||(e.qq=t.target.value)}}})])]),e._v(" "),a("div",{staticClass:"WeChat commonHeight"},[a("span",{staticClass:"commonHeight_Span"},[e._v("微信号")]),a("span",{staticClass:"commonHeight_SpanRight"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.WeChat,expression:"WeChat"}],attrs:{type:"text",placeholder:"请输入微信号"},domProps:{value:e.WeChat},on:{input:function(t){t.target.composing||(e.WeChat=t.target.value)}}})])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{staticClass:"backArrow",attrs:{href:"#/myinfo"}},[t("img",{attrs:{src:a("H5bj")}})])}]};var m=a("VU/8")(i,o,!1,function(e){a("o6KC")},"data-v-2be31157",null);t.default=m.exports},o6KC:function(e,t){}});
//# sourceMappingURL=23.6e0a41647c8bbfbbb42d.js.map