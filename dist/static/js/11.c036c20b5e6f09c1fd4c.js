webpackJsonp([11],{dIqY:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),n=s.n(r),i=s("mtWM"),o=s.n(i),a={name:"",data:function(){return{phoneImgFlag:!0,confirmImgFlag:!0,psdImgFlag:!0,psdImgFlag0:!1,phoneImgFlag0:!1,confirmImgFlag0:!1,psd:"",phoneNumber:"",confirmNumber:"",newPhone:!1,timer:0,time:60,TipsMsg:["手机号码已经注册","密码为6位且不超过20位的数字或字母或下划线组成","验证码错误"],errorTipsMsg:""}},beforeDestroy:function(){clearInterval(this.timer)},watch:{phoneNumber:function(){this.checkNumber()}},methods:{back:function(){this.$router.replace("/mine")},checkNumber:function(){/^\d+/.test(this.phoneNumber)?this.phoneNumber=this.phoneNumber.replace(/\D/g,""):this.phoneNumber=""},changeFlag0:function(e){"phone"===e?this.phoneImgFlag0=!0:"psd"===e?this.psdImgFlag0=!0:this.confirmImgFlag0=!0},checkNewphone:function(){var e=this;if(/^1[34578]\d{9}$/.test(this.phoneNumber)){var t=new URLSearchParams,s=this.phoneNumber.toString();t.append("mobile",s),o.a.post("http://www.gk0101.com/cms/isNoMobile",t).then(function(t){t.data.mess?(e.newPhone=!1,e.errorTipsMsg=e.TipsMsg[0]):(e.newPhone=!0,e.errorTipsMsg="")}).catch(function(e){alert("判断手机号是否已经注册失败"+e)})}},checkPhone:function(){/^1[34578]\d{9}$/.test(this.phoneNumber)&&this.newPhone?this.phoneImgFlag=!1:this.phoneImgFlag=!0},checkConfirm:function(){this.confirmNumber.trim()?this.confirmImgFlag=!1:this.confirmImgFlag=!0},checkPsd:function(){this.psd&&this.errorTipsMsg!==this.TipsMsg[1]?this.psdImgFlag=!1:this.psdImgFlag=!0},checkEffectivePsd:function(){/^[\w]{6,20}$/.test(this.psd)?this.errorTipsMsg="":this.errorTipsMsg=this.TipsMsg[1]},getConfirm:function(){var e=this;if(!this.phoneImgFlag&&this.newPhone){if(60!==this.time)return;this.timer=setInterval(function(){e.$refs.getConfirm.innerHTML=e.time+"s",e.time--,-1===e.time&&(clearInterval(e.timer),e.time=60,e.$refs.getConfirm.innerHTML="获取验证码")},1e3);var t=new URLSearchParams,s=this.phoneNumber.toString();t.append("mobile",s),o.a.post("http://www.gk0101.com/cms/sendAliMsg",t).then(function(e){var t=e.data.code;console.log(t)}).catch(function(e){alert("短信验证发送错误"+e)})}},goRegister:function(){var e=this;if((!this.errorTipsMsg||this.errorTipsMsg===this.TipsMsg[2])&&!this.phoneImgFlag&&!this.psdImgFlag&&this.newPhone&&!this.confirmImgFlag){var t={mobile:this.phoneNumber,userPassword:this.psd,code:this.confirmNumber,equipmentType:3,institutionId:"10103"},s=new URLSearchParams;s.append("params",n()(t)),o.a.post("http://www.gk0101.com/cms/registUser",s).then(function(t){0===t.data.code?o.a.post("http://www.gk0101.com/cms/rest/v1/login/login",s).then(function(t){var s=t.data.data.id;e.$router.replace("/home"),localStorage.setItem("userID",s),e.errorTipsMsg=""}):(e.errorTipsMsg=e.TipsMsg[2],e.confirmImgFlag=!0)}).catch(function(e){alert("注册用户失败"+e)})}}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register clearMargin_top"},[r("a",{staticClass:"backArrow",attrs:{href:"javascript:;"},on:{click:e.back}},[r("img",{attrs:{src:s("H5bj")}})]),e._v(" "),r("p",{staticClass:"register_banner"},[e._v("注册")]),e._v(" "),r("div",{staticClass:"inputPhone"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{focus:function(t){return e.changeFlag0("phone")},blur:e.checkPhone,keyup:e.checkNewphone,input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),r("span",[e._v("+86")]),e.phoneImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.phoneImgFlag0,expression:"phoneImgFlag0"}],attrs:{src:s("7rtp")}}):r("img",{attrs:{src:s("5hax")}})]),e._v(" "),r("div",{staticClass:"inputConfirm"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmNumber,expression:"confirmNumber"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.confirmNumber},on:{focus:function(t){return e.changeFlag0("confirm")},blur:e.checkConfirm,input:function(t){t.target.composing||(e.confirmNumber=t.target.value)}}}),r("span",{ref:"getConfirm",on:{click:e.getConfirm}},[e._v("获取验证码")]),e.confirmImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.confirmImgFlag0,expression:"confirmImgFlag0"}],attrs:{src:s("7rtp")}}):r("img",{attrs:{src:s("5hax")}})]),e._v(" "),r("div",{staticClass:"inputPsd"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.psd,expression:"psd"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.psd},on:{focus:function(t){return e.changeFlag0("psd")},blur:e.checkPsd,keyup:e.checkEffectivePsd,input:function(t){t.target.composing||(e.psd=t.target.value)}}}),e.psdImgFlag?r("img",{directives:[{name:"show",rawName:"v-show",value:e.psdImgFlag0,expression:"psdImgFlag0"}],attrs:{src:s("7rtp")}}):r("img",{attrs:{src:s("5hax")}})]),e._v(" "),r("div",{staticClass:"btn"},[r("button",{on:{click:e.goRegister}},[e._v("立即注册")]),r("span",{domProps:{textContent:e._s(e.errorTipsMsg)}})])])},staticRenderFns:[]};var m=s("VU/8")(a,c,!1,function(e){s("hNbE")},"data-v-233f07ea",null);t.default=m.exports},hNbE:function(e,t){},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var r=s("FeBl"),n=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}}});